(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function e(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(n){if(n.ep)return;n.ep=!0;const o=e(n);fetch(n.href,o)}})();const Z="modulepreload",Q=function(s){return"/"+s},C={},w=function(t,e,r){if(!e||e.length===0)return t();const n=document.getElementsByTagName("link");return Promise.all(e.map(o=>{if(o=Q(o),o in C)return;C[o]=!0;const i=o.endsWith(".css"),a=i?'[rel="stylesheet"]':"";if(!!r)for(let c=n.length-1;c>=0;c--){const l=n[c];if(l.href===o&&(!i||l.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${a}`))return;const u=document.createElement("link");if(u.rel=i?"stylesheet":Z,i||(u.as="script",u.crossOrigin=""),u.href=o,document.head.appendChild(u),i)return new Promise((c,l)=>{u.addEventListener("load",c),u.addEventListener("error",()=>l(new Error(`Unable to preload CSS for ${o}`)))})})).then(()=>t()).catch(o=>{const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=o,window.dispatchEvent(i),!i.defaultPrevented)throw o})};class x{}class b{constructor(t,e){this.webixJet=!0,this.webix=t,this._events=[],this._subs={},this._data={},e&&e.params&&t.extend(this._data,e.params)}getRoot(){return this._root}destructor(){this._detachEvents(),this._destroySubs(),this._events=this._container=this.app=this._parent=this._root=null}setParam(t,e,r){if(this._data[t]!==e&&(this._data[t]=e,this._segment.update(t,e,0),r))return this.show(null)}getParam(t,e){const r=this._data[t];if(typeof r<"u"||!e)return r;const n=this.getParentView();if(n)return n.getParam(t,e)}getUrl(){return this._segment.suburl()}getUrlString(){return this._segment.toString()}getParentView(){return this._parent}$$(t){if(typeof t=="string"){const e=this.getRoot();return e.queryView(r=>(r.config.id===t||r.config.localId===t)&&r.$scope===e.$scope,"self")}else return t}on(t,e,r){const n=t.attachEvent(e,r);return this._events.push({obj:t,id:n}),n}contains(t){for(const e in this._subs){const r=this._subs[e].view;if(r===t||r.contains(t))return!0}return!1}getSubView(t){const e=this.getSubViewInfo(t);if(e)return e.subview.view}getSubViewInfo(t){const e=this._subs[t||"default"];return e?{subview:e,parent:this}:t==="_top"?(this._subs[t]={url:"",id:null,popup:!0},this.getSubViewInfo(t)):this._parent?this._parent.getSubViewInfo(t):null}_detachEvents(){const t=this._events;for(let e=t.length-1;e>=0;e--)t[e].obj.detachEvent(t[e].id)}_destroySubs(){for(const t in this._subs){const e=this._subs[t].view;e&&e.destructor()}this._subs={}}_init_url_data(){const t=this._segment.current();this._data={},this.webix.extend(this._data,t.params,!0)}_getDefaultSub(){if(this._subs.default)return this._subs.default;for(const t in this._subs){const e=this._subs[t];if(!e.branch&&e.view&&t!=="_top"){const r=e.view._getDefaultSub();if(r)return r}}}_routed_view(){const t=this.getParentView();if(!t)return!0;const e=t._getDefaultSub();return!e&&e!==this?!1:t._routed_view()}}function I(s){s[0]==="/"&&(s=s.substr(1));const t=s.split("/"),e=[];for(let r=0;r<t.length;r++){const n=t[r],o={};let i=n.indexOf(":");if(i===-1&&(i=n.indexOf("?")),i!==-1){const a=n.substr(i+1).split(/[\:\?\&]/g);for(const h of a){const u=h.split("=");o[u[0]]=decodeURIComponent(u[1])}}e[r]={page:i>-1?n.substr(0,i):n,params:o,isNew:!0}}return e}function y(s){const t=[];for(const e of s){t.push("/"+e.page);const r=Y(e.params);r&&t.push("?"+r)}return t.join("")}function Y(s){const t=[];for(const e in s)typeof s[e]!="object"&&(t.length&&t.push("&"),t.push(e+"="+encodeURIComponent(s[e])));return t.join("")}class v{constructor(t,e){this._next=1,typeof t=="string"?this.route={url:I(t),path:t}:this.route=t,this.index=e}current(){return this.route.url[this.index]}next(){return this.route.url[this.index+this._next]}suburl(){return this.route.url.slice(this.index)}shift(t){const e=new v(this.route,this.index+this._next);return e.setParams(e.route.url,t,e.index),e}setParams(t,e,r){if(e){const o=t[r].params;for(var n in e)o[n]=e[n]}}refresh(){const t=this.route.url;for(let e=this.index+1;e<t.length;e++)t[e].isNew=!0}toString(){const t=y(this.suburl());return t?t.substr(1):""}_join(t,e){let r=this.route.url;if(t===null)return r;const n=this.route.url;let o=!0;if(r=n.slice(0,this.index+(e?this._next:0)),t){r=r.concat(I(t));for(let i=0;i<r.length;i++)n[i]&&(r[i].view=n[i].view),o&&n[i]&&r[i].page===n[i].page?r[i].isNew=!1:r[i].isNew&&(o=!1)}return r}append(t){const e=this._join(t,!0);return this.route.path=y(e),this.route.url=e,this.route.path}show(t,e,r){const n=this._join(t.url,r);return this.setParams(n,t.params,this.index+(r?this._next:0)),new Promise((o,i)=>{const a=y(n),h={url:n,redirect:a,confirm:Promise.resolve()},u=e?e.app:null;if(u&&!u.callEvent("app:guard",[h.redirect,e,h])){i(new x);return}h.confirm.catch(c=>i(c)).then(()=>{if(h.redirect===null){i(new x);return}if(h.redirect!==a){u.show(h.redirect),i(new x);return}this.route.path=a,this.route.url=n,o()})})}size(t){this._next=t}split(){const t={url:this.route.url.slice(this.index+1),path:""};return t.url.length&&(t.path=y(t.url)),new v(t,0)}update(t,e,r){const n=this.route.url[this.index+(r||0)];if(!n)return this.route.url.push({page:"",params:{}}),this.update(t,e,r);t===""?n.page=e:n.params[t]=e,this.route.path=y(this.route.url)}}class q extends b{constructor(t,e){super(t.webix),this.app=t,this._children=[]}ui(t,e){e=e||{};const r=e.container||t.container,n=this.app.createView(t);return this._children.push(n),n.render(r,this._segment,this),typeof t!="object"||t instanceof b?n:n.getRoot()}show(t,e){if(e=e||{},typeof t=="object"){for(const r in t)this.setParam(r,t[r]);t=null}else{if(t.substr(0,1)==="/")return this.app.show(t,e);if(t.indexOf("./")===0&&(t=t.substr(2)),t.indexOf("../")===0){const n=this.getParentView();return n?n.show(t.substr(3),e):this.app.show("/"+t.substr(3))}const r=this.getSubViewInfo(e.target);if(r){if(r.parent!==this)return r.parent.show(t,e);if(e.target&&e.target!=="default")return this._renderFrameLock(e.target,r.subview,{url:t,params:e.params})}else if(t)return this.app.show("/"+t,e)}return this._show(this._segment,{url:t,params:e.params},this)}_show(t,e,r){return t.show(e,r,!0).then(()=>(this._init_url_data(),this._urlChange())).then(()=>{t.route.linkRouter&&(this.app.getRouter().set(t.route.path,{silent:!0}),this.app.callEvent("app:route",[t.route.path]))})}init(t,e){}ready(t,e){}config(){this.app.webix.message("View:Config is not implemented")}urlChange(t,e){}destroy(){}destructor(){this.destroy(),this._destroyKids(),this._root&&(this._root.destructor(),super.destructor())}use(t,e){t(this.app,this,e)}refresh(){return this.getUrl(),this.destroy(),this._destroyKids(),this._destroySubs(),this._detachEvents(),this._container.tagName&&this._root.destructor(),this._segment.refresh(),this._render(this._segment)}render(t,e,r){typeof e=="string"&&(e=new v(e,0)),this._segment=e,this._parent=r,this._init_url_data(),t=t||document.body;const n=typeof t=="string"?this.webix.toNode(t):t;return this._container!==n?(this._container=n,this._render(e)):this._urlChange().then(()=>this.getRoot())}_render(t){const e=this.config();return e.then?e.then(r=>this._render_final(r,t)):this._render_final(e,t)}_render_final(t,e){let r=null,n=null,o=!1;if(this._container.tagName?n=this._container:(r=this._container,r.popup?(n=document.body,o=!0):n=this.webix.$$(r.id)),!this.app||!n)return Promise.reject(null);let i;const a=this._segment.current(),h={ui:{}};this.app.copyConfig(t,h.ui,this._subs),this.app.callEvent("app:render",[this,e,h]),h.ui.$scope=this,!r&&a.isNew&&a.view&&a.view.destructor();try{if(r&&!o){const c=n,l=c.getParentView();l&&l.name==="multiview"&&!h.ui.id&&(h.ui.id=c.config.id)}this._root=this.app.webix.ui(h.ui,n);const u=this._root;o&&u.setPosition&&!u.isVisible()&&u.show(),r&&(r.view&&r.view!==this&&r.view!==this.app&&r.view.destructor(),r.id=this._root.config.id,this.getParentView()||!this.app.app?r.view=this:r.view=this.app),a.isNew&&(a.view=this,a.isNew=!1),i=Promise.resolve(this._init(this._root,e)).then(()=>this._urlChange().then(()=>(this._initUrl=null,this.ready(this._root,e.suburl()))))}catch(u){i=Promise.reject(u)}return i.catch(u=>this._initError(this,u))}_init(t,e){return this.init(t,e.suburl())}_urlChange(){this.app.callEvent("app:urlchange",[this,this._segment]);const t=[];for(const e in this._subs){const r=this._subs[e],n=this._renderFrameLock(e,r,null);n&&t.push(n)}return Promise.all(t).then(()=>this.urlChange(this._root,this._segment.suburl()))}_renderFrameLock(t,e,r){if(!e.lock){const n=this._renderFrame(t,e,r);n&&(e.lock=n.then(()=>e.lock=null,()=>e.lock=null))}return e.lock}_renderFrame(t,e,r){if(t==="default")if(this._segment.next()){let o=r?r.params:null;return e.params&&(o=this.webix.extend(o||{},e.params)),this._createSubView(e,this._segment.shift(o))}else e.view&&e.popup&&(e.view.destructor(),e.view=null);if(r!==null&&(e.url=r.url,e.params&&(r.params=this.webix.extend(r.params||{},e.params))),e.route){if(r!==null)return e.route.show(r,e.view).then(()=>this._createSubView(e,e.route));if(e.branch)return}let n=e.view;if(!n&&e.url){if(typeof e.url=="string")return e.route=new v(e.url,0),r&&e.route.setParams(e.route.route.url,r.params,0),e.params&&e.route.setParams(e.route.route.url,e.params,0),this._createSubView(e,e.route);if(typeof e.url=="function"&&!(n instanceof e.url)){const o=this.app._override(e.url);o.prototype instanceof V?n=new o({app:this.app}):n=new o(this.app,"")}n||(n=e.url)}if(n)return n.render(e,e.route||this._segment,this)}_initError(t,e){return this.app&&this.app.error("app:error:initview",[e,t]),!0}_createSubView(t,e){return this.app.createFromURL(e.current()).then(r=>r.render(t,e,this))}_destroyKids(){const t=this._children;for(let e=t.length-1;e>=0;e--)t[e]&&t[e].destructor&&t[e].destructor();this._children=[]}}class tt extends q{constructor(t,e){super(t,e),this._ui=e.ui}config(){return this._ui}}class et{constructor(t,e,r){this.path="",this.app=r}set(t,e){this.path=t;const r=this.app;r.app.getRouter().set(r._segment.append(this.path),{silent:!0})}get(){return this.path}}let T=!0;class V extends b{constructor(t){const e=(t||{}).webix||window.webix;t=e.extend({name:"App",version:"1.0",start:"/home"},t,!0),super(e,t),this.config=t,this.app=this.config.app,this.ready=Promise.resolve(),this._services={},this.webix.extend(this,this.webix.EventSystem)}getUrl(){return this._subSegment.suburl()}getUrlString(){return this._subSegment.toString()}getService(t){let e=this._services[t];return typeof e=="function"&&(e=this._services[t]=e(this)),e}setService(t,e){this._services[t]=e}destructor(){this.getSubView().destructor(),super.destructor()}copyConfig(t,e,r){if((t instanceof b||typeof t=="function"&&t.prototype instanceof b)&&(t={$subview:t}),typeof t.$subview<"u")return this.addSubView(t,e,r);const n=t instanceof Array;e=e||(n?[]:{});for(const o in t){let i=t[o];if(typeof i=="function"&&i.prototype instanceof b&&(i={$subview:i}),i&&typeof i=="object"&&!(i instanceof this.webix.DataCollection)&&!(i instanceof RegExp)&&!(i instanceof Map))if(i instanceof Date)e[o]=new Date(i);else{const a=this.copyConfig(i,i instanceof Array?[]:{},r);a!==null&&(n?e.push(a):e[o]=a)}else e[o]=i}return e}getRouter(){return this.$router}clickHandler(t,e){if(t&&(e=e||t.target||t.srcElement,e&&e.getAttribute)){const n=e.getAttribute("trigger");if(n)return this._forView(e,i=>i.app.trigger(n)),t.cancelBubble=!0,t.preventDefault();const o=e.getAttribute("route");if(o)return this._forView(e,i=>i.show(o)),t.cancelBubble=!0,t.preventDefault()}const r=e.parentNode;r&&this.clickHandler(t,r)}getRoot(){return this.getSubView().getRoot()}refresh(){return this._subSegment?this.getSubView().refresh().then(t=>(this.callEvent("app:route",[this.getUrl()]),t)):Promise.resolve(null)}loadView(t){const e=this.config.views;let r=null;if(t==="")return Promise.resolve(this._loadError("",new Error("Webix Jet: Empty url segment")));try{e&&(typeof e=="function"?r=e(t):r=e[t],typeof r=="string"&&(t=r,r=null)),r||(t==="_hidden"?r={hidden:!0}:t==="_blank"?r={}:(t=t.replace(/\./g,"/"),r=this.require("jet-views",t)))}catch(n){r=this._loadError(t,n)}return r.then||(r=Promise.resolve(r)),r=r.then(n=>n.__esModule?n.default:n).catch(n=>this._loadError(t,n)),r}_forView(t,e){const r=this.webix.$$(t);r&&e(r.$scope)}_loadViewDynamic(t){return null}createFromURL(t){let e;return t.isNew||!t.view?e=this.loadView(t.page).then(r=>this.createView(r,"",t.params)):e=Promise.resolve(t.view),e}_override(t){const e=this.config.override;if(e){let r;for(;t;)r=t,t=e.get(t);return r}return t}createView(t,e,r){t=this._override(t);let n;if(typeof t=="function"){if(t.prototype instanceof V)return new t({app:this,name:e,params:r,router:et});if(t.prototype instanceof b)return new t(this,{name:e,params:r});t=t(this)}return t instanceof b?n=t:n=new tt(this,{name:e,ui:t}),n}show(t,e){return t&&this.app&&t.indexOf("//")==0?this.app.show(t.substr(1),e):this.render(this._container,t||this.config.start,e)}trigger(t,...e){this.apply(t,e)}apply(t,e){this.callEvent(t,e)}action(t){return this.webix.bind(function(...e){this.apply(t,e)},this)}on(t,e){this.attachEvent(t,e)}use(t,e){t(this,null,e)}error(t,e){if(this.callEvent(t,e),this.callEvent("app:error",e),this.config.debug){for(var r=0;r<e.length;r++)if(console.error(e[r]),e[r]instanceof Error){let n=e[r].message;n.indexOf("Module build failed")===0?(n=n.replace(/\x1b\[[0-9;]*m/g,""),document.body.innerHTML=`<pre style='font-size:16px; background-color: #ec6873; color: #000; padding:10px;'>${n}</pre>`):(n+="<br><br>Check console for more details",this.webix.message({type:"error",text:n,expire:-1}))}debugger}}render(t,e,r){this._container=typeof t=="string"?this.webix.toNode(t):t||document.body;const n=!this.$router;let o=null;n?(T&&"tagName"in this._container&&(this.webix.event(document.body,"click",c=>this.clickHandler(c)),T=!1),typeof e=="string"&&(e=new v(e,0)),this._subSegment=this._first_start(e),this._subSegment.route.linkRouter=!0):typeof e=="string"?o=e:this.app?o=e.split().route.path||this.config.start:o=e.toString();const i=r?r.params:this.config.params||null,a=this.getSubView(),h=this._subSegment,u=h.show({url:o,params:i},a).then(()=>this.createFromURL(h.current())).then(c=>c.render(t,h)).then(c=>(this.$router.set(h.route.path,{silent:!0}),this.callEvent("app:route",[this.getUrl()]),c));return this.ready=this.ready.then(()=>u),u}getSubView(){if(this._subSegment){const t=this._subSegment.current().view;if(t)return t}return new q(this,{})}require(t,e){return null}_first_start(t){this._segment=t;const e=r=>setTimeout(()=>{this.show(r).catch(n=>{if(!(n instanceof x))throw n})},1);if(this.$router=new this.config.router(e,this.config,this),this._container===document.body&&this.config.animation!==!1){const r=this._container;this.webix.html.addCss(r,"webixappstart"),setTimeout(()=>{this.webix.html.removeCss(r,"webixappstart"),this.webix.html.addCss(r,"webixapp")},10)}if(t){if(this.app){const r=t,n=t.current().view;t.current().view=this,t.next()?(t.refresh(),t=t.split()):t=new v(this.config.start,0),r.current().view=n||this}}else{let r=this.$router.get();r||(r=this.config.start,this.$router.set(r,{silent:!0})),t=new v(r,0)}return t}_loadError(t,e){return this.error("app:error:resolve",[e,t]),{template:" "}}addSubView(t,e,r){const n=t.$subview!==!0?t.$subview:null,o=t.name||(n?this.webix.uid():"default");return e.id=t.id||"s"+this.webix.uid(),(r[o]={id:e.id,url:n,branch:t.branch,popup:t.popup,params:t.params}).popup?null:e}}class K{constructor(t,e){this.config=e||{},this._detectPrefix(),this.cb=t,window.onpopstate=()=>this.cb(this.get())}set(t,e){if(this.config.routes){const r=t.split("?",2);for(const n in this.config.routes)if(this.config.routes[n]===r[0]){t=n+(r.length>1?"?"+r[1]:"");break}}this.get()!==t&&window.history.pushState(null,null,this.prefix+this.sufix+t),(!e||!e.silent)&&setTimeout(()=>this.cb(t),1)}get(){let t=this._getRaw().replace(this.prefix,"").replace(this.sufix,"");if(t=t!=="/"&&t!=="#"?t:"",this.config.routes){const e=t.split("?",2),r=this.config.routes[e[0]];r&&(t=r+(e.length>1?"?"+e[1]:""))}return t}_detectPrefix(){const t=this.config.routerPrefix;this.sufix="#"+(typeof t>"u"?"!":t),this.prefix=document.location.href.split("#",2)[0]}_getRaw(){return document.location.href}}let O=!1;function H(s){if(O||!s)return;O=!0;const t=window;t.Promise||(t.Promise=s.promise);const e=s.version.split(".");e[0]*10+e[1]*1<53&&(s.ui.freeze=function(i){const a=i();return a&&a.then?a.then(function(h){return s.ui.$freeze=!1,s.ui.resize(),h}):(s.ui.$freeze=!1,s.ui.resize()),a});const r=s.ui.baselayout.prototype.addView,n=s.ui.baselayout.prototype.removeView,o={addView(i,a){if(this.$scope&&this.$scope.webixJet&&!i.queryView){const h=this.$scope,u={};i=h.app.copyConfig(i,{},u),r.apply(this,[i,a]);for(const c in u)h._renderFrame(c,u[c],null).then(()=>{h._subs[c]=u[c]});return i.id}else return r.apply(this,arguments)},removeView(){if(n.apply(this,arguments),this.$scope&&this.$scope.webixJet){const i=this.$scope._subs;for(const a in i){const h=i[a];s.$$(h.id)||(h.view.destructor(),delete i[a])}}}};s.extend(s.ui.layout.prototype,o,!0),s.extend(s.ui.baselayout.prototype,o,!0),s.protoUI({name:"jetapp",$init(i){this.$app=new this.app(i);const a=s.uid().toString();i.body={id:a},this.$ready.push(function(){this.callEvent("onInit",[this.$app]),this.$app.render({id:a})})}},s.ui.proxy,s.EventSystem)}class rt extends V{constructor(t){t.router=t.router||K,super(t),H(this.webix)}require(t,e){return require(t+"/"+e)}}class st{constructor(t,e){this.path="",this.cb=t}set(t,e){this.path=t,(!e||!e.silent)&&setTimeout(()=>this.cb(t),1)}get(){return this.path}}function nt(s,t,e){t.on(s,"app:guard",function(r,n,o){if(n===t||n.contains(t)){const i=e();i===!1?o.confirm=Promise.reject(new x):o.confirm=o.confirm.then(()=>i)}})}function R(s,t){return Object.prototype.hasOwnProperty.call(s,t)}function P(s,t,e){for(var r in s)R(s,r)&&t.call(e||s,s[r],r,s)}function it(s){return s.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}function ot(s){s="Warning: "+s,typeof console<"u"&&console.error(s);try{throw new Error(s)}catch{}}var U=String.prototype.replace,J=String.prototype.split,E="||||",$=function(s){var t=s%10;return s!==11&&t===1?0:2<=t&&t<=4&&!(s>=12&&s<=14)?1:2},ut={arabic:function(s){if(s<3)return s;var t=s%100;return t>=3&&t<=10?3:t>=11?4:5},bosnian_serbian:$,chinese:function(){return 0},croatian:$,french:function(s){return s>1?1:0},german:function(s){return s!==1?1:0},russian:$,lithuanian:function(s){return s%10===1&&s%100!==11?0:s%10>=2&&s%10<=9&&(s%100<11||s%100>19)?1:2},czech:function(s){return s===1?0:s>=2&&s<=4?1:2},polish:function(s){if(s===1)return 0;var t=s%10;return 2<=t&&t<=4&&(s%100<10||s%100>=20)?1:2},icelandic:function(s){return s%10!==1||s%100===11?1:0},slovenian:function(s){var t=s%100;return t===1?0:t===2?1:t===3||t===4?2:3}},at={arabic:["ar"],bosnian_serbian:["bs-Latn-BA","bs-Cyrl-BA","srl-RS","sr-RS"],chinese:["id","id-ID","ja","ko","ko-KR","lo","ms","th","th-TH","zh"],croatian:["hr","hr-HR"],german:["fa","da","de","en","es","fi","el","he","hi-IN","hu","hu-HU","it","nl","no","pt","sv","tr"],french:["fr","tl","pt-br"],russian:["ru","ru-RU"],lithuanian:["lt"],czech:["cs","cs-CZ","sk"],polish:["pl"],icelandic:["is"],slovenian:["sl-SL"]};function ht(s){var t={};return P(s,function(e,r){P(e,function(n){t[n]=r})}),t}function ct(s){var t=ht(at);return t[s]||t[J.call(s,/-/,1)[0]]||t.en}function lt(s,t){return ut[ct(s)](t)}function D(s){return s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function pt(s){var t=s&&s.prefix||"%{",e=s&&s.suffix||"}";if(t===E||e===E)throw new RangeError('"'+E+'" token is reserved for pluralization');return new RegExp(D(t)+"(.*?)"+D(e),"g")}var ft=/\$/g,dt="$$",gt=/%\{(.*?)\}/g;function j(s,t,e,r){if(typeof s!="string")throw new TypeError("Polyglot.transformPhrase expects argument #1 to be string");if(t==null)return s;var n=s,o=r||gt,i=typeof t=="number"?{smart_count:t}:t;if(i.smart_count!=null&&n){var a=J.call(n,E);n=it(a[lt(e||"en",i.smart_count)]||a[0])}return n=U.call(n,o,function(h,u){return!R(i,u)||i[u]==null?h:U.call(i[u],ft,dt)}),n}function m(s){var t=s||{};this.phrases={},this.extend(t.phrases||{}),this.currentLocale=t.locale||"en";var e=t.allowMissing?j:null;this.onMissingKey=typeof t.onMissingKey=="function"?t.onMissingKey:e,this.warn=t.warn||ot,this.tokenRegex=pt(t.interpolation)}m.prototype.locale=function(s){return s&&(this.currentLocale=s),this.currentLocale};m.prototype.extend=function(s,t){P(s,function(e,r){var n=t?t+"."+r:r;typeof e=="object"?this.extend(e,n):this.phrases[n]=e},this)};m.prototype.unset=function(s,t){typeof s=="string"?delete this.phrases[s]:P(s,function(e,r){var n=t?t+"."+r:r;typeof e=="object"?this.unset(e,n):delete this.phrases[n]},this)};m.prototype.clear=function(){this.phrases={}};m.prototype.replace=function(s){this.clear(),this.extend(s)};m.prototype.t=function(s,t){var e,r,n=t??{};if(typeof this.phrases[s]=="string")e=this.phrases[s];else if(typeof n._=="string")e=n._;else if(this.onMissingKey){var o=this.onMissingKey;r=o(s,n,this.currentLocale,this.tokenRegex)}else this.warn('Missing translation for key: "'+s+'"'),r=s;return typeof e=="string"&&(r=j(e,n,this.currentLocale,this.tokenRegex)),r};m.prototype.has=function(s){return R(this.phrases,s)};m.transformPhrase=function(s,t,e){return j(s,t,e)};function _t(s,t,e){e=e||{};const r=e.storage;let n=r?r.get("lang")||"en":e.lang||"en";function o(u,c,l){c.__esModule&&(c=c.default);const p={phrases:c};e.polyglot&&s.webix.extend(p,e.polyglot);const f=h.polyglot=new m(p);if(f.locale(u),h._=s.webix.bind(f.t,f),n=u,r&&r.put("lang",n),e.webix){const g=e.webix[u];g&&s.webix.i18n.setLocale(g)}return l?Promise.resolve():s.refresh()}function i(){return n}function a(u,c){if(e.path===!1)return;if(typeof e.path=="function"){e.path(u).then(f=>o(u,f,c));return}const l=(e.path?e.path+"/":"")+u,p=s.require("jet-locales",l);o(u,p,c)}const h={getLang:i,setLang:a,setLangData:o,_:null,polyglot:null};s.setService("locale",h),a(n,!0)}function N(s,t,e){t.urls?e=t.urls[e]||e:t.param&&(e={[t.param]:e}),s.show(e)}function wt(s,t,e){const r=t.getSubViewInfo().parent,n=t.$$(e.id||e);let o=!1;n.attachEvent("onchange",function(){o||N(r,e,this.getValue())}),n.attachEvent("onafterselect",function(){if(!o){let i=null;n.setValue?i=this.getValue():n.getSelectedId&&(i=n.getSelectedId()),N(r,e,i)}}),t.on(s,"app:route",function(){let i="";if(e.param)i=t.getParam(e.param,!0);else{const a=r.getUrl()[1];a&&(i=a.page)}i&&(o=!0,n.setValue&&n.getValue()!==i?n.setValue(i):n.select&&n.exists(i)&&n.getSelectedId()!==i&&n.select(i),o=!1)})}const mt={good:"check",error:"warning",saving:"refresh fa-spin"},bt={good:"Ok",error:"Error",saving:"Connecting..."};function vt(s,t,e){let r="good",n=0,o=!1,i=e.expire;!i&&i!==!1&&(i=2e3);const a=e.texts||bt,h=e.icons||mt;typeof e=="string"&&(e={target:e});function u(d){const _=t.$$(e.target);_&&(d||(d="<div class='status_"+r+"'><span class='webix_icon fa-"+h[r]+"'></span> "+a[r]+"</div>"),_.setHTML(d))}function c(){n--,S("good")}function l(d){n--,S("error",d)}function p(d){n++,S("saving"),d&&d.then&&d.then(c,l)}function f(){return r}function g(){n===0&&u(" ")}function S(d,_){n<0&&(n=0),d==="saving"?(r="saving",u()):(o=d==="error",n===0&&(r=o?"error":"good",o?s.error("app:error:server",[_.responseText||_]):i&&setTimeout(g,i),u()))}function k(d){const _=s.webix.dp(d);_&&(t.on(_,"onAfterDataSend",p),t.on(_,"onAfterSaveError",(W,G,A)=>l(A)),t.on(_,"onAfterSave",c))}s.setService("status",{getStatus:f,setStatus:S,track:k}),e.remote&&t.on(s.webix,"onRemoteCall",p),e.ajax&&t.on(s.webix,"onBeforeAjax",(d,_,W,G,A,Rt,X)=>{p(X)}),e.data&&k(e.data)}function yt(s,t,e){e=e||{};const r=e.storage;let n=r?r.get("theme")||"material-default":e.theme||"material-default";const o={getTheme(){return n},setTheme(i,a){const h=i.split("-"),u=document.getElementsByTagName("link");for(let c=0;c<u.length;c++){const l=u[c].getAttribute("title");l&&(l===i||l===h[0]?u[c].disabled=!1:u[c].disabled=!0)}s.webix.skin.set(h[0]),s.webix.html.removeCss(document.body,"theme-"+n),s.webix.html.addCss(document.body,"theme-"+i),n=i,r&&r.put("theme",i),a||s.refresh()}};s.setService("theme",o),o.setTheme(n,!0)}function F(s,t,e){for(let r=0;r<e.length;r++)s[e[r]]=t[r+1]?t[r+1].page:""}function xt(s,t,e){const r=e.route||e,n={};t.on(s,"app:urlchange",function(a,h){t===a&&(F(n,h.suburl(),r),h.size(r.length+1))});const o=t.setParam,i=t.getParam;t.setParam=function(a,h,u){const c=r.indexOf(a);if(c>=0){if(n[a]=h,this._segment.update("",h,c+1),u)return t.show(null)}else return o.call(this,a,h,u)},t.getParam=function(a,h){const u=n[a];return typeof u<"u"?u:i.call(this,a,h)},F(n,t.getUrl(),r)}function St(s,t,e){e=e||{};const r=e.login||"/login",n=e.logout||"/logout",o=e.afterLogin||s.config.start,i=e.afterLogout||"/login",a=e.ping||5*60*1e3,h=e.model;let u=e.user;const c={getUser(){return u},getStatus(p){return p?h.status().catch(()=>null).then(f=>{u=f}):u!==null},login(p,f){return h.login(p,f).then(g=>{if(u=g,!g)throw new Error("Access denied");s.callEvent("app:user:login",[u]),s.show(o)})},logout(){return u=null,h.logout().then(p=>(s.callEvent("app:user:logout",[]),p))}};function l(p,f){p===n?(c.logout(),f.redirect=i):p!==r&&!c.getStatus()&&(f.redirect=r)}s.setService("user",c),s.attachEvent("app:guard",function(p,f,g){return e.public&&e.public(p)?!0:(typeof u>"u"&&(g.confirm=c.getStatus(!0).then(()=>l(p,g))),l(p,g))}),a&&setInterval(()=>c.getStatus(!0),a)}let M=window.webix;M&&H(M);const z={UnloadGuard:nt,Locale:_t,Menu:wt,Theme:yt,User:St,Status:vt,UrlParam:xt},L=window;L.Promise||(L.Promise=L.webix.promise);const B={apiServer:"",setApiServer(s){this.apiServer=s},login(s,t){return webix.ajax().post(this.apiServer+"/api/login/",{username:s,password:t},{withCredentials:!0}).then(e=>e.json()).then(e=>(e.message&&webix.storage.local.put("user",e.user),e))},logout(){return webix.ajax().post(this.apiServer+"/api/logout/").then(s=>s.json()).then(()=>{webix.storage.local.remove("user")})},status(){return webix.ajax().headers({"X-CSRFToken":this.getCSRFToken(),"Content-Type":"application/json"}).post(this.apiServer+"/api/status/",null,{withCredentials:!0}).then(s=>s.json())},getCSRFToken(){const s=document.cookie.match(/csrftoken=([^;]+)/);return s?s[1]:""},getUser(){return webix.storage.local.get("user")}},Et=Object.assign({"./views/account.js":()=>w(()=>import("./account-20e54e8d.js"),["assets/account-20e54e8d.js","assets/photo-85d3a37a.js"]),"./views/data.js":()=>w(()=>import("./data-607158e9.js"),[]),"./views/login.js":()=>w(()=>import("./login-ac5452a6.js"),[]),"./views/notification.js":()=>w(()=>import("./notification-4249d171.js"),["assets/notification-4249d171.js","assets/photo-85d3a37a.js"]),"./views/preferences.js":()=>w(()=>import("./preferences-ca736f7f.js"),[]),"./views/privacy.js":()=>w(()=>import("./privacy-4b530fb9.js"),[]),"./views/start.js":()=>w(()=>import("./start-592a1cd0.js"),[]),"./views/theme.js":()=>w(()=>import("./theme-f5df6916.js"),[]),"./views/top.js":()=>w(()=>import("./top-7cb26028.js"),[])}),Pt=s=>Et[`./views/${s}.js`]().then(t=>t.default),Vt=Object.assign({"./locales/de.js":()=>w(()=>import("./de-ee427e48.js"),[]),"./locales/en.js":()=>w(()=>import("./en-d4a196c0.js"),[])}),$t=s=>Vt[`./locales/${s}.js`]().then(t=>t.default);class Lt extends rt{constructor(t){const e={id:"Demo",version:"1.0.0",router:{}.VITE_BUILD_AS_MODULE?st:K,debug:!1,start:"/top/account",views:Pt,apiServer:"http://127.0.0.1:8000/"};console.log("API Server URL: ",e.apiServer),super({...e,...t}),this.use(z.Locale,{path:$t,storage:this.webix.storage.session}),B.setApiServer(this.config.apiServer),this.use(z.User,{model:B,ping:3e3,afterLogin:"/top/account",afterLogout:"/login"})}urlChange(t,e){!this.getService("auth").isAuthenticated()&&e!=="/login"&&this.show("/login")}}({}).VITE_BUILD_AS_MODULE||webix.ready(()=>new Lt().render());export{z as x,q as z};
