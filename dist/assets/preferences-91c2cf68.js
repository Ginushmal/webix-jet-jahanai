import{z as s}from"./index-e166ea31.js";class c extends s{config(){return{rows:[{template:"User Preferences",type:"header"},{cols:[{view:"list",id:"preferenceCategories",width:200,select:!0,data:[{id:"account",value:"Account Settings"},{id:"notifications",value:"Notification Settings"},{id:"theme",value:"Theme Settings"},{id:"privacy",value:"Privacy Settings"}],on:{onAfterSelect:t=>this.loadPreferences(t)}},{view:"form",id:"preferencesForm",elements:[]}]}]}}loadPreferences(t){fetch(`http://127.0.0.1:8000/api/preferences/${t}/`,{credentials:"include"}).then(e=>e.json()).then(e=>{const r=this.$$("preferencesForm");r.clear(),r.define("elements",this.createFormElements(e)),r.refresh()})}createFormElements(t){let e=[];for(const r in t)e.push({view:"text",label:r,name:r,value:t[r]});return e.push({view:"button",value:"Save",click:()=>this.savePreferences()}),e}savePreferences(){const t=this.$$("preferencesForm").getValues();fetch("http://127.0.0.1:8000/api/preferences/update/",{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(t)}).then(e=>e.json()).then(e=>webix.message("Preferences updated successfully")).catch(e=>webix.message({type:"error",text:"Failed to update preferences"}))}}export{c as default};
